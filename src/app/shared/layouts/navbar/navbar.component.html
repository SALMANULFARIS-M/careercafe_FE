<!-- Main Navbar Wrapper -->
<div class="w-full fixed top-0 left-0 z-50 bg-transparent">
  <div
    #navbar
    class="bg-transparent duration-700 ease-in-out relative"
    [@navbarAnimation]="isScrolled ? 'scrolled' : 'expanded'"
    [ngClass]="{
      'mt-12 rounded-xl shadow-sm bg-transparent': !isScrolled && !isMobile,
      'mt-0 rounded-none shadow-lg bg-transparent': isScrolled || isMobile
    }"
  >
    <nav
      class="flex justify-between bg-navy items-center px-6 py-2 transition-all duration-700 ease-in-out"
      [ngClass]="{
        'mt-4 rounded-xl': !isScrolled,
        'mt-0 rounded-none': isScrolled
      }"
    >
      <!-- Logo -->
      <a class="font-bold leading-none p-2" routerLink="/">
        <img
          src="careercafe_logo-transparent.png"
          class="w-16 rounded"
          alt="logo"
        />
      </a>

      <!-- Mobile Menu Toggle -->
      <div class="lg:hidden">
        <button
          (click)="toggleMobileMenu()"
          class="navbar-burger flex items-center text-white p-3"
        >
          <svg
            class="block h-4 w-4 fill-current"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <title>Mobile menu</title>
            <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
          </svg>
        </button>
      </div>

      <!-- Desktop Menu -->
      <ul
        class="hidden lg:flex lg:mx-auto lg:items-center lg:w-auto lg:space-x-6 merriweather-light"
      >
        <li>
          <a
            class="nav-link montserrat-normal"
            routerLink="/"
            routerLinkActive="active-link animated-underline"
            [routerLinkActiveOptions]="{ exact: true }"
            >Home</a
          >
        </li>
        <li class="text-yellow-200">|</li>
        <li>
          <a
            class="nav-link montserrat-normal"
            routerLink="/about"
            routerLinkActive="active-link animated-underline"
            >About Us</a
          >
        </li>
        <li class="text-yellow-200">|</li>
        <li>
          <!-- Community Button with Dropdown -->
          <div
            class="relative inline-block text-left"
            (click)="toggleDropdown()"
            (keydown.enter)="toggleDropdown()"
          >
            <button
              type="button"
              class="nav-link montserrat-normal whatsapp-menu-trigger text-white rounded-md bg-transparent"
              [attr.aria-expanded]="open"
              aria-haspopup="true"
            >
              Community
            </button>

            <!-- Dropdown Menu -->
            <div
              *ngIf="open"
              class="absolute left-1/2 z-50 mt-4 w-56 -translate-x-1/2 rounded-lg bg-navy shadow-lg origin-top transform transition-all duration-200 ease-out scale-95 opacity-0"
              [class.scale-100]="open"
              [class.opacity-100]="open"
              [class.visible]="open"
            >
              <a
                href="https://whatsapp.com/channel/0029VbAR6X4F6smvafCCms2K "
                target="_blank"
                class="block px-4 py-3 text-white text-sm hover:bg-indigo-900 hover:-translate-x-1 transition-all duration-200 rounded-t-lg focus:outline focus:outline-yellow-400"
              >
                âœˆï¸ Abroad Jobs CC
              </a>
              <!-- <a
                href="https://chat.whatsapp.com/community2"
                target="_blank"
                class="block px-4 py-3 text-white text-sm hover:bg-indigo-900 hover:-translate-x-1 transition-all duration-200 focus:outline focus:outline-yellow-400"
              >
                ğŸ’» Developers
              </a>
              <a
                href="https://chat.whatsapp.com/community3"
                target="_blank"
                class="block px-4 py-3 text-white text-sm hover:bg-indigo-900 hover:-translate-x-1 transition-all duration-200 focus:outline focus:outline-yellow-400"
              >
                ğŸ“ Students Hub
              </a>
              <a
                href="https://chat.whatsapp.com/community4"
                target="_blank"
                class="block px-4 py-3 text-white text-sm hover:bg-indigo-900 hover:-translate-x-1 transition-all duration-200 focus:outline focus:outline-yellow-400"
              >
                ğŸ¤– AI & Tech Talks
              </a>
              <a
                href="https://chat.whatsapp.com/community5"
                target="_blank"
                class="block px-4 py-3 text-white text-sm hover:bg-indigo-900 hover:-translate-x-1 transition-all duration-200 rounded-b-lg focus:outline focus:outline-yellow-400"
              >
                ğŸ“¢ Events & Announcements
              </a> -->
            </div>
          </div>
        </li>
        <li class="text-yellow-200">|</li>
        <li>
          <a
            class="nav-link montserrat-normal"
            routerLink="/contact"
            routerLinkActive="active-link animated-underline"
            >Contact</a
          >
        </li>
      </ul>

      <!-- Franchise CTA -->
      <a
        routerLink="/franchise"
        routerLinkActive="active-link animated-underline"
        class="hidden lg:flex text-white font-semibold text-base px-4 py-2 mr-3 rounded-lg shadow-md hover:border-2 montserrat-normal"
      >
        Become a Franchise
      </a>
    </nav>
  </div>
</div>

<!-- Mobile Menu Overlay -->
<div *ngIf="isMobileMenuOpen" class="fixed inset-0 z-50 lg:hidden">
  <!-- Backdrop -->
  <div
    class="absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"
    (click)="toggleMobileMenu()"
  ></div>

  <!-- Slide-in Menu -->
  <nav
    class="absolute top-0 left-0 h-full w-4/5 max-w-xs bg-navy text-white px-6 py-6 shadow-xl transform transition-transform duration-300 ease-in-out"
    [class.translate-x-0]="isMobileMenuOpen"
    [class.-translate-x-full]="!isMobileMenuOpen"
  >
    <!-- Logo & Close -->
    <div class="flex items-center justify-between mb-8">
      <a
        routerLink="/"
        class="text-3xl font-bold leading-none"
        (click)="toggleMobileMenu()"
      >
        <img src="careercafe_logo-transparent.png" class="h-10" alt="logo" />
      </a>
      <button (click)="toggleMobileMenu()" aria-label="Close menu">
        <svg
          class="h-6 w-6 text-gray-300 hover:text-white transition"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <!-- Menu Items -->
    <ul class="space-y-4">
      <li>
        <a
          routerLink="/"
          [routerLinkActiveOptions]="{ exact: true }"
          routerLinkActive="text-yellow-400"
          class="block montserrat-normal text-lg hover:text-yellow-400 transition"
          (click)="toggleMobileMenu()"
          >Home</a
        >
      </li>
      <li>
        <a
          routerLink="/about"
          routerLinkActive="text-yellow-400"
          class="block montserrat-normal text-lg hover:text-yellow-400 transition"
          (click)="toggleMobileMenu()"
          >About Us</a
        >
      </li>

      <!-- Community Toggle -->
      <li>
        <button
          type="button"
          (click)="toggleDropdown()"
          class="w-full text-left community-toggle montserrat-normal text-lg hover:text-yellow-400 transition flex items-center justify-between"
        >
          Community
          <svg
            [ngClass]="{ 'rotate-180': open }"
            class="h-5 w-5 transform transition-transform"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <ul
          *ngIf="open"
          class="pl-4 mt-2 space-y-2 text-sm transition-opacity duration-300 ease-in-out opacity-100"
        >
          <li>
            <a
              href="https://chat.whatsapp.com/community1"
              target="_blank"
              class="block text-white hover:text-yellow-400 transition"
              > âœˆï¸ Abroad Jobs CC</a
            >
          </li>
          <!-- <li>
            <a
              href="https://chat.whatsapp.com/community2"
              target="_blank"
              class="block text-white hover:text-yellow-400 transition"
              >ğŸ’» Developers</a
            >
          </li>
          <li>
            <a
              href="https://chat.whatsapp.com/community3"
              target="_blank"
              class="block text-white hover:text-yellow-400 transition"
              >ğŸ“ Students Hub</a
            >
          </li>
          <li>
            <a
              href="https://chat.whatsapp.com/community4"
              target="_blank"
              class="block text-white hover:text-yellow-400 transition"
              >ğŸ¤– AI & Tech Talks</a
            >
          </li>
          <li>
            <a
              href="https://chat.whatsapp.com/community5"
              target="_blank"
              class="block text-white hover:text-yellow-400 transition"
              >ğŸ“¢ Events & Announcements</a
            >
          </li> -->
        </ul>
      </li>

      <li>
        <a
          routerLink="/contact"
          routerLinkActive="text-yellow-400"
          class="block montserrat-normal text-lg hover:text-yellow-400 transition"
          (click)="toggleMobileMenu()"
          >Contact</a
        >
      </li>
      <li>
        <a
          routerLink="/franchise"
          routerLinkActive="text-yellow-400"
          class="block montserrat-normal text-lg hover:text-yellow-400 transition"
          (click)="toggleMobileMenu()"
          >Become a Franchise</a
        >
      </li>
    </ul>
  </nav>
</div>
